---
title: "01-tt"
output: html_document
date: "2023-02-07"
---

Step 1: Visit the TidyTuesday website and check out the resources and podcast episodes.
https://www.tidytuesday.com/

Step 2: Go to the TidyTuesday GitHub repo and read the README.
https://github.com/rfordatascience/tidytuesday

Step 3: Go to the 2023 bird watching dataset and read the README and the data dictionary information.
https://github.com/rfordatascience/tidytuesday/blob/master/data/2023/2023-01-10/readme.md

Step 4: Download the data set and subset using this code in R:

# Get the Data

# Read in with tidytuesdayR package 
# Install from CRAN via: install.packages("tidytuesdayR")
# This loads the readme and all the datasets for the week of interest

```{r}
#install.packages("tidytuesdayR")
```




# Either ISO-8601 date or year/week works!

tuesdata <- tidytuesdayR::tt_load('2023-01-10')
tuesdata <- tidytuesdayR::tt_load(2023, week = 02)

feederwatch <- tuesdata$feederwatch


```{r}
#tuesdata <- tidytuesdayR::tt_load(2023, week = 02)

#feederwatch <- tuesdata$feederwatch
```


# Or read in the data manually

feederwatch <- readr::read_csv('https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2023/2023-01-10/PFW_2021_public.csv')
site_data <- readr::read_csv('https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2023/2023-01-10/PFW_count_site_data_public_2021.csv')


```{r}
#read in the data
feederwatch <- readr::read_csv('https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2023/2023-01-10/PFW_2021_public.csv')
site_data <- readr::read_csv('https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2023/2023-01-10/PFW_count_site_data_public_2021.csv')

#combine the data

#filter the data

#plot the data

```



# Download the raw data.

PFW_2021_public <- readr::read_csv("https://clo-pfw-prod.s3.us-west-2.amazonaws.com/data/PFW_2021_public.csv")
dplyr::glimpse(PFW_2021_public)


```{r}
PFW_2021_public <- readr::read_csv("https://clo-pfw-prod.s3.us-west-2.amazonaws.com/data/PFW_2021_public.csv")
dplyr::glimpse(PFW_2021_public)
```




# There are almost three million rows! The file is too big for github, let's
# subsample.

set.seed(424242)
PFW_2021_public_subset <- dplyr::slice_sample(PFW_2021_public, n = 1e5)

readr::write_csv(PFW_2021_public_subset, here::here("data", "2023", "2023-01-10", "PFW_2021_public.csv"))


```{r}
set.seed(424242)
PFW_2021_public_subset <- dplyr::slice_sample(PFW_2021_public, n = 1e5)# read in the data
languages <- readr::read_csv('https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2023/2023-03-21/languages.csv')

# create a new variable that is the number of speakers in millions
languages$speakers_millions <- languages$speakers / 1000000

# create a new variable that is the number of speakers in billions
languages$speakers_billions <- languages$speakers / 1000000000

# create a new variable that is the number of speakers in trillions
languages$speakers_trillions <- languages$speakers / 1000000000000

# create a new variable that is the number of speakers in quadrillions
languages$speakers_quadrillions <- languages$speakers / 1000000000000000

# create a new variable that is the number of speakers in quintillions
languages$speakers_quintillions <- languages$speakers / 1000000000000000000

# create a new variable that is the number of speakers in sextillions
languages$speakers_sextillions <- languages$speakers / 1000000000000000000000

# create a new variable that is the number of speakers in septillions
languages$speakers_septillions <- languages$speakers / 1000000000000000000000000

# create a new variable that is the number of speakers in octillions
languages$speakers_octillions <- languages$speakers / 1000000000000000000000000000

# create a new variable that is the number of speakers in nonillions
languages$speakers_nonillions <- languages$speakers / 1000000000000000000000000000000

# create a new variable that is the number of speakers in decillions
languages$speakers_decillions <- languages$speakers / 1000000000000000000000000000000000

# create a new variable that is the number of speakers in undecillions
languages$speakers_undecillions <- languages$speakers / 1000000000000000000000000000000000000

# create a new variable that is the number of speakers in duodecillions
languages$speakers_duodecillions <- languages$speakers / 1000000000000000000000000000000000000000

# create a new variable that is the number of speakers in tredecillions
languages$speakers_tredecillions <- languages$speakers / 1000000000000000000000000000000000000000000

# create a new variable that is the number of speakers in quattuordecillions
languages$speakers_quattuordecillions <- languages$speakers / 1000000000000000000000000000000000000000000000

# create a new variable that is the number of speakers in quindecillions
languages$speakers_quindecillions <- languages$speakers / 1000000000000000000000000000000000000000000000000

# create a new variable that is the number of speakers in sexdecillions
languages$speakers_sexdecillions <- languages$speakers / 1000000000000000000000000000000000000000000000000000

# create a new variable that is the number of speakers in septendecillions
languages$speakers_septendecillions <- languages$speakers / 1000000000000000000000000000000000000000000000000000000

# create a new variable that is the number of speakers in octodecillions
languages$speakers_octodecillions <- languages$speakers / 1000000000000000000000000000000000000000000000000000000000

# create a new variable that is the number of speakers in novemdecillions
languages$speakers_novemdecillions <- languages$speakers / 1000000000000000000000000000000000000000000000000000000000000

# create a new variable that is the number of speakers in vigintillions
languages$speakers_vigintillions <- languages$speakers / 1000000000000000000000000000000000000000000000000000000000000000

# create a new variable that is the number of speakers in unvigintillions
languages$speakers_unvigintillions <- languages$speakers / 1000000000000000000000000000000000000000000000000000000000000000000

# create a new variable that is the number of speakers in duovigintillions
languages$speakers_duovigintillions <- languages$speakers / 1000000000000000000000000000000000000000000000000000000000000000000000

# create a new variable that is the number of speakers in trevigintillions
languages$speakers_trevigintillions <- languages$speakers / 1000000000000000000000000000000000000000000000000000000000000000000000000

# create a new variable that is the number of speakers in quattuorvigintillions
languages$speakers_quattuorvigintillions <- languages$speakers / 1000000000000000000000000000000000000000000000000000000000000000000000000000

# create a new variable that is the number of speakers in quinvigintillions
languages$speakers_quinvigintillions <- languages$speakers / 1000000000000000000000000000000000000000000000000000000000000000000000000000000

# create a new variable that is the number of speakers in sexvigintillions
languages$speakers_sexvigintillions <- languages$speakers / 1000000000000000000000000000000000000000000000000000000000000000000000000000000000

# create a new variable that is the number of speakers in septenvigintillions
languages$speakers_septenvigintillions <- languages$speakers / 1000000000000000000000000000000000000000000000000000000000000000000000000000000000000

# create a new variable that is the number of speakers in octovigintillions
languages$speakers_octovigintillions <- languages$speakers / 1000000000000000000000000000000000000000000000000000000000000000000000000000000000000000

# create a new variable that is the number of speakers in novemvigintillions
languages$speakers_novemvigintillions <- languages$speakers / 1000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000

# create a new variable that is the number of speakers in trigintillions
languages$speakers_trigintillions <- languages$speakers / 1000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000

# create a new variable that is the number of speakers in untrigintillions
languages$speakers_untrigintillions <- languages$speakers / 1000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000

# create a new variable that is the number of speakers in duotrigintillions
languages$speakers_duotrigintillions <- languages$speakers / 1000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000

# create a new variable that is the number of speakers in googol
languages$speakers_googol <- languages$speakers / 1000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000

# create a new variable that is the number of speakers in googolplex
languages$speakers_googolplex <- languages$speakers / 1000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000

# create a new variable that is the number of speakers in centillion
languages$speakers_centillion <- languages$speakers / 1000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000

# create a new variable that is the number of speakers in duocentillion
languages$speakers_duocentillion <- languages$speakers / 1000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000

# create a new variable that is the number of speakers in trecentillion
languages$speakers_trecentillion <- languages$speakers / 100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000

# create a new variable that is the number of speakers in quadringentillion
languages$speakers_quadringentillion <- languages$speakers / 100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000

# create a new variable that is the number of speakers in quingentillion
languages$speakers_quingentillion <- languages$speakers / 100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000

# create a new variable that is the number of speakers in sescentillion
languages$speakers_sescentillion <- languages$speakers / 10000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000

# create a new variable that is the number of speakers in septingentillion
languages$speakers_septingentillion <- languages$speakers / 10000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000

# create a new variable that is the number of speakers in octingentillion
languages$speakers_octingentillion <- languages$speakers / 10000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000

# create a new variable that is the number of speakers in noningentillion
languages$speakers_noningentillion <- languages$speakers / 1000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000

# create a new variable that is the number of speakers in millinillion
languages$speakers_millinillion <- languages$speakers / 1000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000

# create a new variable that is the number of speakers in centillion
languages$speakers_centillion <- languages$speakers / 1000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000

# create a new variable that is the number of speakers in duocentillion
languages$speakers_duocentillion <- languages$speakers / 100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000



readr::write_csv(PFW_2021_public_subset, here::here("misc", "data", "PFW_2021_public.csv"))
```







Step 5: Now that you know what types of data are available, write down 2-3 questions you want to answer using this dataset (e.g., how does the number of birds sited relate to the habitat type?)


how many birds based on place
date
type of bird


Step 6: Manipulate the data (make it tidy!) and make some fun plots! Post your favorite plot to this discussion thread. In lab meeting we will go around the room and talk about what questions we had, how we manipulated the data and any issues we ran into, and the plots we 

```{r}
library(tidyverse)
```



```{r}
PFW_2021_public_subset %>%
  group_by(subnational1_code, Month, species_code) %>%
  summarize(total_count = sum(how_many, na.rm=TRUE)) %>%
  filter(total_count > 500)
```


```{r}
df <- PFW_2021_public_subset %>%
  group_by(subnational1_code, Month, species_code) %>%
  summarize(total_count = sum(how_many, na.rm=TRUE)) %>%
  filter(total_count > 500)
```

```{r}
ggplot(df, aes(x = total_count)) +
  geom_histogram() +
  facet_wrap(~species_code)
```

```{r}
ggplot(df, aes(x = total_count)) +
  geom_bar() +
  facet_wrap(~Month)
```


```{r}
ggplot(df, aes(x = total_count)) +
  geom_boxplot() +
  facet_wrap(~subnational1_code)
```



```{r}
ggplot(df, aes(x = total_count)) +
  geom_boxplot()
```



Step 7: Keep up with Tidy Tuesday in the future if you want!

